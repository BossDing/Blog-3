<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beautifulsoup.mapper.ArticleMapper">
  <sql id="Base_Column_List">
    id,title,subtitle,description,content,img_url,stars,category_id,author_id,create_time
  </sql>

  <select id="findAllArticles" resultType="com.beautifulsoup.bean.db.Article">
    select <include refid="Base_Column_List"/> FROM article
  </select>
  <select id="getArticlesCount" resultType="int">
    select count(*) from article
  </select>
  <select id="listArticlesByPage" parameterType="int" resultType="com.beautifulsoup.bean.db.Article">
    select article.* from article limit #{pageNum},4
  </select>
  <select id="selectArticleById" parameterType="int" resultType="com.beautifulsoup.bean.db.Article">
    select <include refid="Base_Column_List"/> from article where id = #{id,jdbcType=INTEGER}
  </select>
  <insert id="insertArticle" parameterType="com.beautifulsoup.bean.db.Article">
      <selectKey order="AFTER" resultType="int" keyProperty="id">
        SELECT LAST_INSERT_ID();
      </selectKey>
    insert into article(title,subtitle,description,img_url,stars,category_id,author_id,create_time,content)
    values
    (#{title},#{subtitle},#{description},#{imgUrl},#{stars},#{categoryId},#{authorId},#{createTime},#{content})
  </insert>
</mapper>